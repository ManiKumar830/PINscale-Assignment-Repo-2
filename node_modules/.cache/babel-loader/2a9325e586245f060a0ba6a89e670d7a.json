{"ast":null,"code":"import _regeneratorRuntime from\"/home/workspace/reactjs/coding-practices/nxtTrendzSpecificProductDetails/node_modules/.pnpm/@babel+runtime@7.22.6/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/workspace/reactjs/coding-practices/nxtTrendzSpecificProductDetails/node_modules/.pnpm/@babel+runtime@7.22.6/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/workspace/reactjs/coding-practices/nxtTrendzSpecificProductDetails/node_modules/.pnpm/@babel+runtime@7.22.6/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/workspace/reactjs/coding-practices/nxtTrendzSpecificProductDetails/node_modules/.pnpm/@babel+runtime@7.22.6/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/workspace/reactjs/coding-practices/nxtTrendzSpecificProductDetails/node_modules/.pnpm/@babel+runtime@7.22.6/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/workspace/reactjs/coding-practices/nxtTrendzSpecificProductDetails/node_modules/.pnpm/@babel+runtime@7.22.6/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Component}from'react';import Loader from'react-loader-spinner';import Cookies from'js-cookie';// eslint-disable-next-line import/no-extraneous-dependencies\nimport{v4}from'uuid';import TransactionItem from'../TransactionItem';import AdminSideBar from'../AdminSideBar';import'./index.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var apiStatusConstants={initial:'INITIAL',success:'SUCCESS',failure:'FAILURE',inProgress:'IN_PROGRESS'};var AdminAllTransactions=/*#__PURE__*/function(_Component){_inherits(AdminAllTransactions,_Component);var _super=_createSuper(AdminAllTransactions);function AdminAllTransactions(){var _this;_classCallCheck(this,AdminAllTransactions);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={allTransactionsDetails:[],apiStatus:apiStatusConstants.initial};_this.getDetails=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,options,response,jsonData,newData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this.setState({apiStatus:apiStatusConstants.inProgress});url='https://bursting-gelding-24.hasura.app/api/rest/daywise-totals-last-7-days-admin';options={method:'GET',headers:{'content-type':'application/json','x-hasura-admin-secret':'g08A3qQy00y8yFDq3y6N1ZQnhOPOa4msdie5EtKS1hFStar01JzPKrtKEzYY2BtF','x-hasura-role':'admin'}};_context.next=5;return fetch(url,options);case 5:response=_context.sent;if(!response.ok){_context.next=13;break;}_context.next=9;return response.json();case 9:jsonData=_context.sent;newData=jsonData.last_7_days_transactions_totals_admin.map(function(eachItem){return{id:v4(),date:eachItem.date,sum:eachItem.sum,type:eachItem.type};});console.log(newData);_this.setState({allTransactionsDetails:newData,apiStatus:apiStatusConstants.success});case 13:if(response.status===404){_this.setState({apiStatus:apiStatusConstants.failure});}case 14:case\"end\":return _context.stop();}},_callee);}));_this.onClickLogOut=function(){var history=_this.props.history;Cookies.remove('jwt_token');history.replace('/login');};_this.renderLoadingView=function(){return/*#__PURE__*/_jsx(\"div\",{className:\"products-details-loader-container\",\"data-testid\":\"loader\",children:/*#__PURE__*/_jsx(Loader,{type:\"ThreeDots\",color:\"#0b69ff\",height:\"50\",width:\"50\"})});};_this.renderFailureView=function(){return/*#__PURE__*/_jsxs(\"div\",{className:\"product-details-error-view-container\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"error view\",src:\"https://assets.ccbp.in/frontend/react-js/nxt-trendz-error-view-img.png\",className:\"error-view-image\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"product-not-found-heading\",children:\"Not Found\"})]});};_this.renderTransactionView=function(){var allTransactionsDetails=_this.state.allTransactionsDetails;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"Transaction-Header-container-1\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"accounts-text\",children:\"Transactions\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"all-transactions-ul-el\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-heading-container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"userName-text ut\",children:\"UserName\"}),/*#__PURE__*/_jsx(\"p\",{className:\"userName-text Transaction-Name\",children:\"Transaction Name\"}),/*#__PURE__*/_jsx(\"p\",{className:\"userName-text Category-text\",children:\"Category\"}),/*#__PURE__*/_jsx(\"p\",{className:\"userName-text date-text\",children:\"Date\"}),/*#__PURE__*/_jsx(\"p\",{className:\"userName-text amount-text\",children:\"Amount\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:allTransactionsDetails.map(function(eachItem){return/*#__PURE__*/_jsx(TransactionItem,{transactionDetails:eachItem},eachItem.id);})})]})]});};_this.renderAllTransactionView=function(){var apiStatus=_this.state.apiStatus;console.log(apiStatus);switch(apiStatus){case apiStatusConstants.success:return _this.renderTransactionView();case apiStatusConstants.failure:return _this.renderFailureView();case apiStatusConstants.inProgress:return _this.renderLoadingView();default:return null;}};return _this;}_createClass(AdminAllTransactions,[{key:\"componentDidMount\",value:function componentDidMount(){this.getDetails();}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-container-2\",children:[/*#__PURE__*/_jsx(AdminSideBar,{}),this.renderAllTransactionView()]});}}]);return AdminAllTransactions;}(Component);export default AdminAllTransactions;","map":{"version":3,"names":["Component","Loader","Cookies","v4","TransactionItem","AdminSideBar","jsx","_jsx","jsxs","_jsxs","apiStatusConstants","initial","success","failure","inProgress","AdminAllTransactions","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","state","allTransactionsDetails","apiStatus","getDetails","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","options","response","jsonData","newData","wrap","_callee$","_context","prev","next","setState","method","headers","fetch","sent","ok","json","last_7_days_transactions_totals_admin","map","eachItem","id","date","sum","type","console","log","status","stop","onClickLogOut","history","props","remove","replace","renderLoadingView","className","children","color","height","width","renderFailureView","alt","src","renderTransactionView","transactionDetails","renderAllTransactionView","_createClass","key","value","componentDidMount","render"],"sources":["/home/workspace/reactjs/coding-practices/nxtTrendzSpecificProductDetails/src/components/AdminPage/AdminAllTransactions/index.js"],"sourcesContent":["import {Component} from 'react'\nimport Loader from 'react-loader-spinner'\nimport Cookies from 'js-cookie'\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport {v4} from 'uuid'\n\nimport TransactionItem from '../TransactionItem'\nimport AdminSideBar from '../AdminSideBar'\n\nimport './index.css'\n\nconst apiStatusConstants = {\n  initial: 'INITIAL',\n  success: 'SUCCESS',\n  failure: 'FAILURE',\n  inProgress: 'IN_PROGRESS',\n}\n\nclass AdminAllTransactions extends Component {\n  state = {\n    allTransactionsDetails: [],\n    apiStatus: apiStatusConstants.initial,\n  }\n\n  componentDidMount() {\n    this.getDetails()\n  }\n\n  getDetails = async () => {\n    this.setState({\n      apiStatus: apiStatusConstants.inProgress,\n    })\n\n    const url =\n      'https://bursting-gelding-24.hasura.app/api/rest/daywise-totals-last-7-days-admin'\n    const options = {\n      method: 'GET',\n      headers: {\n        'content-type': 'application/json',\n        'x-hasura-admin-secret':\n          'g08A3qQy00y8yFDq3y6N1ZQnhOPOa4msdie5EtKS1hFStar01JzPKrtKEzYY2BtF',\n        'x-hasura-role': 'admin',\n      },\n    }\n\n    const response = await fetch(url, options)\n\n    if (response.ok) {\n      const jsonData = await response.json()\n\n      const newData = jsonData.last_7_days_transactions_totals_admin.map(\n        eachItem => ({\n          id: v4(),\n          date: eachItem.date,\n          sum: eachItem.sum,\n          type: eachItem.type,\n        }),\n      )\n\n      console.log(newData)\n\n      this.setState({\n        allTransactionsDetails: newData,\n        apiStatus: apiStatusConstants.success,\n      })\n    }\n    if (response.status === 404) {\n      this.setState({\n        apiStatus: apiStatusConstants.failure,\n      })\n    }\n  }\n\n  onClickLogOut = () => {\n    const {history} = this.props\n    Cookies.remove('jwt_token')\n    history.replace('/login')\n  }\n\n  renderLoadingView = () => (\n    <div className=\"products-details-loader-container\" data-testid=\"loader\">\n      <Loader type=\"ThreeDots\" color=\"#0b69ff\" height=\"50\" width=\"50\" />\n    </div>\n  )\n\n  renderFailureView = () => (\n    <div className=\"product-details-error-view-container\">\n      <img\n        alt=\"error view\"\n        src=\"https://assets.ccbp.in/frontend/react-js/nxt-trendz-error-view-img.png\"\n        className=\"error-view-image\"\n      />\n      <h1 className=\"product-not-found-heading\">Not Found</h1>\n    </div>\n  )\n\n  renderTransactionView = () => {\n    const {allTransactionsDetails} = this.state\n\n    return (\n      <div>\n        <div className=\"Transaction-Header-container-1\">\n          <h1 className=\"accounts-text\">Transactions</h1>\n        </div>\n\n        <div className=\"all-transactions-ul-el\">\n          <div className=\"transaction-heading-container\">\n            <p className=\"userName-text ut\">UserName</p>\n            <p className=\"userName-text Transaction-Name\">Transaction Name</p>\n            <p className=\"userName-text Category-text\">Category</p>\n            <p className=\"userName-text date-text\">Date</p>\n            <p className=\"userName-text amount-text\">Amount</p>\n          </div>\n          <ul>\n            {allTransactionsDetails.map(eachItem => (\n              <TransactionItem\n                key={eachItem.id}\n                transactionDetails={eachItem}\n              />\n            ))}\n          </ul>\n        </div>\n      </div>\n    )\n  }\n\n  renderAllTransactionView = () => {\n    const {apiStatus} = this.state\n    console.log(apiStatus)\n\n    switch (apiStatus) {\n      case apiStatusConstants.success:\n        return this.renderTransactionView()\n      case apiStatusConstants.failure:\n        return this.renderFailureView()\n      case apiStatusConstants.inProgress:\n        return this.renderLoadingView()\n      default:\n        return null\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"bg-container-2\">\n        <AdminSideBar />\n\n        {this.renderAllTransactionView()}\n      </div>\n    )\n  }\n}\n\nexport default AdminAllTransactions\n"],"mappings":"0qCAAA,OAAQA,SAAS,KAAO,OAAO,CAC/B,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B;AACA,OAAQC,EAAE,KAAO,MAAM,CAEvB,MAAO,CAAAC,eAAe,KAAM,oBAAoB,CAChD,MAAO,CAAAC,YAAY,KAAM,iBAAiB,CAE1C,MAAO,aAAa,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEpB,GAAM,CAAAC,kBAAkB,CAAG,CACzBC,OAAO,CAAE,SAAS,CAClBC,OAAO,CAAE,SAAS,CAClBC,OAAO,CAAE,SAAS,CAClBC,UAAU,CAAE,aACd,CAAC,IAEK,CAAAC,oBAAoB,uBAAAC,UAAA,EAAAC,SAAA,CAAAF,oBAAA,CAAAC,UAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,oBAAA,WAAAA,qBAAA,MAAAK,KAAA,CAAAC,eAAA,MAAAN,oBAAA,UAAAO,IAAA,CAAAC,SAAA,CAAAC,MAAA,CAAAC,IAAA,KAAAC,KAAA,CAAAJ,IAAA,EAAAK,IAAA,GAAAA,IAAA,CAAAL,IAAA,CAAAK,IAAA,IAAAF,IAAA,CAAAE,IAAA,EAAAJ,SAAA,CAAAI,IAAA,GAAAP,KAAA,CAAAF,MAAA,CAAAU,IAAA,CAAAC,KAAA,CAAAX,MAAA,QAAAY,MAAA,CAAAL,IAAA,GAAAL,KAAA,CACxBW,KAAK,CAAG,CACNC,sBAAsB,CAAE,EAAE,CAC1BC,SAAS,CAAEvB,kBAAkB,CAACC,OAChC,CAAC,CAAAS,KAAA,CAMDc,UAAU,cAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,GAAA,CAAAC,OAAA,CAAAC,QAAA,CAAAC,QAAA,CAAAC,OAAA,QAAAP,mBAAA,GAAAQ,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACX5B,KAAA,CAAK6B,QAAQ,CAAC,CACZhB,SAAS,CAAEvB,kBAAkB,CAACI,UAChC,CAAC,CAAC,CAEIyB,GAAG,CACP,kFAAkF,CAC9EC,OAAO,CAAG,CACdU,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,uBAAuB,CACrB,kEAAkE,CACpE,eAAe,CAAE,OACnB,CACF,CAAC,CAAAL,QAAA,CAAAE,IAAA,SAEsB,CAAAI,KAAK,CAACb,GAAG,CAAEC,OAAO,CAAC,QAApCC,QAAQ,CAAAK,QAAA,CAAAO,IAAA,KAEVZ,QAAQ,CAACa,EAAE,EAAAR,QAAA,CAAAE,IAAA,WAAAF,QAAA,CAAAE,IAAA,SACU,CAAAP,QAAQ,CAACc,IAAI,CAAC,CAAC,QAAhCb,QAAQ,CAAAI,QAAA,CAAAO,IAAA,CAERV,OAAO,CAAGD,QAAQ,CAACc,qCAAqC,CAACC,GAAG,CAChE,SAAAC,QAAQ,QAAK,CACXC,EAAE,CAAExD,EAAE,CAAC,CAAC,CACRyD,IAAI,CAAEF,QAAQ,CAACE,IAAI,CACnBC,GAAG,CAAEH,QAAQ,CAACG,GAAG,CACjBC,IAAI,CAAEJ,QAAQ,CAACI,IACjB,CAAC,EACH,CAAC,CAEDC,OAAO,CAACC,GAAG,CAACrB,OAAO,CAAC,CAEpBvB,KAAA,CAAK6B,QAAQ,CAAC,CACZjB,sBAAsB,CAAEW,OAAO,CAC/BV,SAAS,CAAEvB,kBAAkB,CAACE,OAChC,CAAC,CAAC,SAEJ,GAAI6B,QAAQ,CAACwB,MAAM,GAAK,GAAG,CAAE,CAC3B7C,KAAA,CAAK6B,QAAQ,CAAC,CACZhB,SAAS,CAAEvB,kBAAkB,CAACG,OAChC,CAAC,CAAC,CACJ,CAAC,yBAAAiC,QAAA,CAAAoB,IAAA,MAAA5B,OAAA,GACF,GAAAlB,KAAA,CAED+C,aAAa,CAAG,UAAM,CACpB,GAAO,CAAAC,OAAO,CAAIhD,KAAA,CAAKiD,KAAK,CAArBD,OAAO,CACdlE,OAAO,CAACoE,MAAM,CAAC,WAAW,CAAC,CAC3BF,OAAO,CAACG,OAAO,CAAC,QAAQ,CAAC,CAC3B,CAAC,CAAAnD,KAAA,CAEDoD,iBAAiB,CAAG,8BAClBjE,IAAA,QAAKkE,SAAS,CAAC,mCAAmC,CAAC,cAAY,QAAQ,CAAAC,QAAA,cACrEnE,IAAA,CAACN,MAAM,EAAC6D,IAAI,CAAC,WAAW,CAACa,KAAK,CAAC,SAAS,CAACC,MAAM,CAAC,IAAI,CAACC,KAAK,CAAC,IAAI,CAAE,CAAC,CAC/D,CAAC,EACP,CAAAzD,KAAA,CAED0D,iBAAiB,CAAG,8BAClBrE,KAAA,QAAKgE,SAAS,CAAC,sCAAsC,CAAAC,QAAA,eACnDnE,IAAA,QACEwE,GAAG,CAAC,YAAY,CAChBC,GAAG,CAAC,wEAAwE,CAC5EP,SAAS,CAAC,kBAAkB,CAC7B,CAAC,cACFlE,IAAA,OAAIkE,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAC,WAAS,CAAI,CAAC,EACrD,CAAC,EACP,CAAAtD,KAAA,CAED6D,qBAAqB,CAAG,UAAM,CAC5B,GAAO,CAAAjD,sBAAsB,CAAIZ,KAAA,CAAKW,KAAK,CAApCC,sBAAsB,CAE7B,mBACEvB,KAAA,QAAAiE,QAAA,eACEnE,IAAA,QAAKkE,SAAS,CAAC,gCAAgC,CAAAC,QAAA,cAC7CnE,IAAA,OAAIkE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,CAC5C,CAAC,cAENjE,KAAA,QAAKgE,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrCjE,KAAA,QAAKgE,SAAS,CAAC,+BAA+B,CAAAC,QAAA,eAC5CnE,IAAA,MAAGkE,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,UAAQ,CAAG,CAAC,cAC5CnE,IAAA,MAAGkE,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,kBAAgB,CAAG,CAAC,cAClEnE,IAAA,MAAGkE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,UAAQ,CAAG,CAAC,cACvDnE,IAAA,MAAGkE,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAC,MAAI,CAAG,CAAC,cAC/CnE,IAAA,MAAGkE,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAC,QAAM,CAAG,CAAC,EAChD,CAAC,cACNnE,IAAA,OAAAmE,QAAA,CACG1C,sBAAsB,CAACyB,GAAG,CAAC,SAAAC,QAAQ,qBAClCnD,IAAA,CAACH,eAAe,EAEd8E,kBAAkB,CAAExB,QAAS,EADxBA,QAAQ,CAACC,EAEf,CAAC,EACH,CAAC,CACA,CAAC,EACF,CAAC,EACH,CAAC,CAEV,CAAC,CAAAvC,KAAA,CAED+D,wBAAwB,CAAG,UAAM,CAC/B,GAAO,CAAAlD,SAAS,CAAIb,KAAA,CAAKW,KAAK,CAAvBE,SAAS,CAChB8B,OAAO,CAACC,GAAG,CAAC/B,SAAS,CAAC,CAEtB,OAAQA,SAAS,EACf,IAAK,CAAAvB,kBAAkB,CAACE,OAAO,CAC7B,MAAO,CAAAQ,KAAA,CAAK6D,qBAAqB,CAAC,CAAC,CACrC,IAAK,CAAAvE,kBAAkB,CAACG,OAAO,CAC7B,MAAO,CAAAO,KAAA,CAAK0D,iBAAiB,CAAC,CAAC,CACjC,IAAK,CAAApE,kBAAkB,CAACI,UAAU,CAChC,MAAO,CAAAM,KAAA,CAAKoD,iBAAiB,CAAC,CAAC,CACjC,QACE,MAAO,KAAI,CACf,CACF,CAAC,QAAApD,KAAA,EAAAgE,YAAA,CAAArE,oBAAA,GAAAsE,GAAA,qBAAAC,KAAA,CApHD,SAAAC,kBAAA,CAAoB,CAClB,IAAI,CAACrD,UAAU,CAAC,CAAC,CACnB,CAAC,GAAAmD,GAAA,UAAAC,KAAA,CAoHD,SAAAE,OAAA,CAAS,CACP,mBACE/E,KAAA,QAAKgE,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BnE,IAAA,CAACF,YAAY,GAAE,CAAC,CAEf,IAAI,CAAC8E,wBAAwB,CAAC,CAAC,EAC7B,CAAC,CAEV,CAAC,WAAApE,oBAAA,GApIgCf,SAAS,EAuI5C,cAAe,CAAAe,oBAAoB"},"metadata":{},"sourceType":"module"}